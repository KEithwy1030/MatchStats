# 数据库更新频率与状态报告

本报告提供了 Supabase 数据库中核心数据表的更新频率、最近更新时间及当前状态的详细概览。

**报告生成时间：** 2026-02-09 02:22 (北京时间)

---

## 1. 数据表统计概览

| 数据表名称          | 总行数 | 最后更新时间 (UTC)   | 24小时内活动量 | 描述                                        |
| :------------------ | :----- | :------------------- | :------------- | :------------------------------------------ |
| `sporttery_matches` | 107    | 2026-02-08 02:40     | 96 行          | 来自竞彩官网的核心赛程数据。每日更新。      |
| `match_predictions` | 82     | 2026-02-08 16:10     | 34 行          | 由 Grok AI 生成的比赛深度情报与预测。       |
| `fd_matches`        | 1,941  | **2026-02-09 02:20** | **563 行**     | 来自 Football-Data.org API 的详细比赛数据。 |
| `sync_logs`         | 4,000  | **2026-02-09 02:20** | **4 行**       | 所有后台同步任务的执行日志。                |

---

## 2. 异常诊断与落实回顾 (2026-02-09)

### 故障现象
用户发现 `football-data.org` 的数据自 2月7日 16:00 UTC 以来停止了自动更新，怀疑 API 调用失效。

### 检查与证实结果
1.  **API 有效性验证**：已通过 `scripts/test_api_v4.py` 手动调用 API，返回 **Status 200 OK**。**API Key 依然有效**且额度充足。
2.  **服务状态检查**：经检查，服务器上当前没有运行 `MatchStats/venv` 下的 Python 进程。这意味着 **自动化调度服务已停止运行**。
3.  **停发时间点**：`sync_logs` 最后的自动记录停留在北京时间 2月8日凌晨 0:00 (16:00 UTC)。此后没有任何自动同步日志。
4.  **手动回填成果**：Agent 已启动 `scripts/sync_fd_now.py` 进行了全量回填，成功更新 **563 条** 比赛记录，数据现已同步至最新。

---

## 3. 维护建议
- **重启服务**：目前的自动更新依赖于运行 `e:\CursorData\MatchStats\run.bat`。请确保该控制台窗口处于开启状态。
- **监控说明**：如果 `sync_logs` 中持续出现 `status='failed'`，通常是网络抖动或限流，系统会自动重试。若长时间没有新纪录，则说明服务进程已崩溃或被关闭。
